<!-- ---
layout: post
title:  [Jekyll 블로그] Disqus 댓글 기능
category: [jekyll]
tags:
  - Jekyll
  - Disqus
comments: true
--- -->

<h1 id="지킬-블로그-댓글-기능-달기">지킬 블로그 댓글 기능 달기</h1>
<p>Disqus는 정적인 Jekyll에서 동적 기능인 댓글을 사용할 수 있게 한다.</p>

<h3 id="step1-disqus-가입하기">Step1) Disqus 가입하기</h3>
<p><a href="https://disqus.com/">Disqus</a> 에서 회원가입 하고, 이메일로 verify를 한다.</p>

<h3 id="step2-사이트-등록하기">Step2) 사이트 등록하기</h3>
<ul>
  <li>
    <p>오른편 톱니바퀴 모양 아이콘을 클릭하고, 드롭다운 메뉴의 <code class="highlighter-rouge">Add Disqus To Site</code> 페이지에서 <code class="highlighter-rouge">GET STARTED</code>를 클릭한다.</p>
  </li>
  <li>
    <p>2번 째 항목인 <code class="highlighter-rouge">I want to install Disqus on my site</code>를 클릭한다.</p>
  </li>
  <li>
    <p>웹사이트 이름과 카테고리를 임의로 지정해주고, 웹사이트 URL은 댓글 기능을 붙일 내 블로그 주소를 기입한다.</p>
  </li>
</ul>

<h3 id="step3-installation과-jekyll에-적용">Step3) Installation과 Jekyll에 적용</h3>
<ul>
  <li>
    <p>Jekyll 항목을 선택하고, 아래와 같은 Universal Code를 얻는다.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">_includes</code> 디렉토리에 comments.html 을 생성하고 얻은 코드를
`` 사이에 붙여넣는다.</p>
  </li>
</ul>

<!-- ```python

``` -->
<ul>
  <li><code class="highlighter-rouge">_layouts</code> 디렉토리의 <code class="highlighter-rouge">post.html</code> 에서 댓글 기능을 붙일 위치에 다음과 같이 include를 한다.
```python</li>
</ul>
<div>
  <section>
  <div class="container">
    <header class="major">
      <h1>[장고 기본편] 4. View</h1>
      <div class="post-date">
        <small>04 Jun 2017</small><br />
        <img src="/images/tags.png" class="tag-img" />
<div class="post-tags">
  
  
  <a href="/tags/#Django">Django</a>,
  
  <a href="/tags/#AskDjango">AskDjango</a>,
  
  <a href="/tags/#View">View</a>,
  
  <a href="/tags/#FBVCBV">FBVCBV</a>
  
</div>
<br />

      </div>
    </header>
    <hr noshade="" />
    <section class="post-content">
      <blockquote>
  <p>| ٩(๑òωó๑)۶ 아, 아, 마이크 테스트 |<br />
이 마크다운은 이진석 선생님의 ‘Ask Django VOD 장고 기본편(Feat.여행 블로그 만들기)’를 토대로 작성되었습니다.</p>
</blockquote>

<h2 id="view">View</h2>
<ul>
  <li>URLConf로부터 받은 객체
    <ul>
      <li>첫번째 인자로 <code class="highlighter-rouge">HttpRequest</code> 인스턴스를 받는다.</li>
      <li>또한 반드시 <code class="highlighter-rouge">HttpRequest</code> 인스턴스를 리턴해야한다.</li>
    </ul>
  </li>
  <li>뷰는 크게 <code class="highlighter-rouge">함수기반 뷰</code>와 <code class="highlighter-rouge">클래스기반 뷰</code>로 구분된다.</li>
</ul>

<blockquote>
  <p><em>Function Based View</em> 예시</p>
</blockquote>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>

<span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
  <span class="n">name</span> <span class="o">=</span> <span class="s">'Hello'</span>
  <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">'''
    &lt;h1&gt;{}, World!&lt;/h1&gt;
  '''</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">))</span>
</code></pre>
</div>

<blockquote>
  <p><em>Class Based View</em> 예시</p>
</blockquote>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">View</span>
<span class="c"># 뷰 사용패턴을 일반화시켜놓은 뷰의 모음</span>

<span class="k">class</span> <span class="nc">SampleTemplateView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="nd">@classmethod</span>
  <span class="k">def</span> <span class="nf">as_view</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">template_name</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">view_fn</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">template_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">view_fn</span>

<span class="n">fbv_view</span> <span class="o">=</span> <span class="n">SampleTemplateView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span><span class="s">'myapp/sample_template.html'</span><span class="p">)</span>
<span class="c"># as_view() 클래스 함수를 통해 함수기반 뷰에 입각한 객체 생성, 즉 클래스를 통해 함수를 호출</span>
</code></pre>
</div>
<p><br /></p>

<h3 id="template-공통">Template 공통</h3>
<p>[myapp/templates/myapp/post_form.html]<br /></p>
<ul>
  <li>table 태그 위에 <code class="highlighter-rouge">csrf_token</code> 가 와야하는데 지킬 서버에서 오류를 일으키기 때문에 따로 기재합니다.</li>
</ul>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">""</span> <span class="n">method</span><span class="o">=</span><span class="s">"post"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">table</span><span class="o">&gt;</span>
        
  <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
</code></pre>
</div>
<p><br />
뷰에 대한 더 자세한 내용이 궁금하다면 <a href="https://bbungsang.github.io/tutorial/2017/06/03/django-tutorial-part3-2.html">Click!</a></p>

    </section>
    <br /><br />
    <footer>
      
      <a href="/travel/2017/06/04/askdjango-URLConf-RegularExpression.html" class="float-left">&larr; Previous post</a> 
      
      <a href="/2017/06/06/jekyll-blog-comment.html" class="float-right">Next post &rarr;</a> 
      <br /><br />
      
  <div id="disqus_thread"></div>
  <script>

  /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
  /*
  var disqus_config = function () {
  this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
  this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };
  */
  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = 'https://https-bbungsang-github-io.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


    </footer>
  </div>
</section>

  

</div>
<div class="highlighter-rouge"><pre class="highlight"><code>
### Step4) 포스트에 Disqus 사용하기
Disqus를 사용하려면, YAML frontmatter에 아래와 같이 comments: true를 삽입하면 된다. comments: false나 comments: 자체를 넣지 않으면 Disqus가 나타나지 않는다.

```python
---
layout: default
comments: true
# other options
---
</code></pre>
</div>
